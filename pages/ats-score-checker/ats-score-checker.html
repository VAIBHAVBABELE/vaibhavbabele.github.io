<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ATS Score Checker — NITra MITra</title>

  <!-- Bootstrap & Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <!-- External CSS -->
  <link rel="stylesheet" href="ats-score-checker.css">

  <!-- Mammoth (DOCX -> text) -->
  <script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>
  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>

  <!-- Chart.js for visual score breakdown -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4"></script>

  <!-- Tippy.js for tooltips -->
  <link href="https://unpkg.com/tippy.js@6/dist/tippy.css" rel="stylesheet">
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
</head>
<body>
  <!-- Top Navigation Bar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="/index.html"><i class="fa fa-arrow-left me-1"></i> NITra MITra</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <button id="theme-toggle" class="nav-link"><i class="fa fa-moon me-1"></i> Dark Mode</button>
          </li>
          <li class="nav-item">
            <button id="lang-toggle" class="nav-link"><i class="fa fa-language me-1"></i> हिन्दी</button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container mt-5">
    <div class="hero">
      <h1 class="mb-2 display-4">Resume ATS Score Checker</h1>
      <p class="small-muted mb-4 lead">Upload your resume (PDF / DOCX / TXT), paste a job description or keywords, and receive an advanced ATS compatibility score with detailed insights and AI-like suggestions.</p>
      <div class="d-flex justify-content-center gap-3 flex-wrap">
        <a href="/index.html" class="btn btn-outline-secondary"><i class="fa fa-arrow-left me-1"></i> Back to Home</a>
        <button class="btn primary-btn" id="sample-jd-btn"><i class="fa fa-file-alt me-1"></i> Use Example Job Description</button>
      </div>
    </div>

    <!-- Main layout -->
    <div class="row g-4 mt-4">
      <!-- Left: Upload + JD input -->
      <div class="col-lg-5">
        <div class="card p-4">
          <h5 class="mb-3">1) Upload Your Resume</h5>
          <p class="small-muted mb-3">Supported formats: <b>PDF</b>, <b>DOCX</b>, <b>TXT</b>. All processing happens securely in your browser—no data is sent to servers.</p>

          <div class="mb-4">
            <label class="file-input-label w-100">
              <input id="resume-file" type="file" accept=".pdf,.docx,.doc,.txt" style="display:none">
              <div class="border rounded p-4 text-center bg-light">
                <i class="fa fa-upload fa-3x mb-2"></i>
                <div id="file-name" class="mt-2 small-muted">Drag & drop or click to upload</div>
                <div class="mt-2"><small class="text-muted">Max file size: 10MB</small></div>
              </div>
            </label>
          </div>

          <div class="mb-4">
            <label for="jd-text" class="form-label fw-semibold">2) Paste Job Description or Keywords</label>
            <textarea id="jd-text" rows="10" class="form-control" placeholder="Paste the full job description here, or list key skills like 'JavaScript, React, SQL'..."></textarea>
            <div class="form-text">Pro Tip: Include role-specific terms, skills, and tools for accurate matching. Advanced keyword extraction will handle the rest.</div>
          </div>

          <div class="d-flex gap-3">
            <button class="btn primary-btn flex-grow-1" id="analyze-btn"><i class="fa fa-rocket me-1"></i> Analyze Now</button>
            <button class="btn btn-outline-secondary" id="clear-btn"><i class="fa fa-trash me-1"></i> Clear</button>
          </div>

          <hr class="my-3" />

          <div id="parsing-status" class="small-muted d-flex align-items-center"><i class="fa fa-info-circle me-1"></i> Ready to parse your resume.</div>
        </div>

        <!-- Advanced Formatting Hints with Accordion -->
        <div class="card p-4 mt-4">
          <h6 class="mb-3">Advanced Formatting Tips</h6>
          <div class="accordion" id="hintsAccordion">
            <div class="accordion-item border-0">
              <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                  <i class="fa fa-lightbulb me-2"></i> Essential Sections & Contacts
                </button>
              </h2>
              <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#hintsAccordion">
                <div class="accordion-body small-muted">
                  Ensure your resume includes clear sections for Skills, Experience, Education. Add email, phone, and LinkedIn at the top for ATS parsing.
                </div>
              </div>
            </div>
            <div class="accordion-item border-0">
              <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                  <i class="fa fa-pen me-2"></i> Keyword Optimization
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#hintsAccordion">
                <div class="accordion-body small-muted">
                  Integrate job-specific keywords naturally into your summary and achievements to boost matching scores.
                </div>
              </div>
            </div>
            <div class="accordion-item border-0">
              <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                  <i class="fa fa-file-alt me-2"></i> ATS Best Practices
                </button>
              </h2>
              <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#hintsAccordion">
                <div class="accordion-body small-muted">
                  Avoid tables, images, or fancy fonts. Use standard headings and bullet points for better compatibility.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right: Results -->
      <div class="col-lg-7">
        <div class="card p-4">
          <div class="d-flex align-items-center justify-content-between mb-4">
            <div>
              <h5 class="mb-1 fw-bold">Analysis Results</h5>
              <div class="small-muted">Detailed score breakdown, insights, and actionable recommendations.</div>
            </div>
            <div class="text-end">
              <div id="score-number" class="result-score">—</div>
              <div class="small-muted">ATS Score (0–100)</div>
            </div>
          </div>

          <!--~$CHART$-->
          <div class="mb-4">
            <canvas id="scoreChart" height="100"></canvas>
          </div>

          <div id="score-breakdown" class="mb-4 d-flex gap-3 flex-wrap"></div>

          <div class="mb-4">
            <h6 class="fw-semibold">Matched Keywords</h6>
            <div id="matched-keywords" class="mb-3"></div>

            <h6 class="fw-semibold">Missing / Suggested Keywords</h6>
            <div id="missing-keywords" class="mb-3"></div>

            <h6 class="fw-semibold">Extracted Resume Preview (First 1,500 chars)</h6>
            <pre id="resume-preview">Upload a resume to see the preview.</pre>
          </div>

          <div class="mb-4">
            <h6 class="fw-semibold">Section & Formatting Checks</h6>
            <ul id="section-checks" class="list-group list-group-flush"></ul>
          </div>

          <div class="d-flex gap-3 flex-wrap">
            <button class="btn primary-btn" id="download-suggestions" disabled><i class="fa fa-download me-1"></i> Download Report (TXT)</button>
            <button class="btn btn-outline-secondary" id="view-sample-1"><i class="fa fa-eye me-1"></i> Optimized Resume Sample</button>
            <button class="btn btn-outline-secondary" id="view-sample-2"><i class="fa fa-eye me-1"></i> Simple Template</button>
          </div>
        </div>

        <!-- Enhanced Examples Section -->
        <div class="mt-4">
          <h6 class="fw-bold mb-3">Example Resume Templates</h6>
          <div class="row g-3">
            <div class="col-md-6">
              <div class="template-card">
                <strong class="d-block mb-1">Optimized Technical Resume</strong>
                <p class="small-muted mb-2">Keyword-rich, quantifiable achievements, ATS-friendly structure.</p>
                <div class="d-flex gap-2">
                  <button class="btn btn-sm primary-btn" id="download-opt-tech"><i class="fa fa-download me-1"></i> Download TXT</button>
                  <button class="btn btn-sm btn-outline-secondary" id="preview-opt-tech"><i class="fa fa-eye me-1"></i> Preview</button>
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="template-card">
                <strong class="d-block mb-1">Simple Clean Resume</strong>
                <p class="small-muted mb-2">Minimalist design for quick edits and broad compatibility.</p>
                <div class="d-flex gap-2">
                  <button class="btn btn-sm primary-btn" id="download-simple"><i class="fa fa-download me-1"></i> Download TXT</button>
                  <button class="btn btn-sm btn-outline-secondary" id="preview-simple"><i class="fa fa-eye me-1"></i> Preview</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Preview sample -->
  <div class="modal fade" id="sampleModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
      <div class="modal-content rounded-3">
        <div class="modal-header bg-light">
          <h5 class="modal-title fw-bold" id="sampleModalTitle">Sample Resume Preview</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body bg-white">
          <pre id="sampleModalContent" class="p-3 bg-light rounded"></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="scripts.js"></script>
</body>
</html>